<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Word Explorer - Know All About a Word</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --dark: #1a1a2e;
      --light: #f8f9fa;
      --gray: #6c757d;
      --gray-light: #e9ecef;
      --success: #4cc9f0;
      --danger: #f72585;
      --warning: #f8961e;
      --noun-color: #7209b7;
      --pronoun-color: #f15bb5;
      --verb-color: #00bbf9;
      --adjective-color: #00f5d4;
      --adverb-color: #fee440;
      --border-radius: 12px;
      --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --box-shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.12);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 15px;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      padding-top: 10px;
    }

    h1 {
      font-family: 'Merriweather', serif;
      font-size: 2.2rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 8px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--gray);
      max-width: 500px;
      margin: 0 auto 20px;
    }

    /* Input Section */
    .card {
      background: white;
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.2);
      overflow: hidden;
    }

    .card:hover {
      box-shadow: var(--box-shadow-hover);
    }

    .input-section {
      margin-bottom: 30px;
    }

    .input-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 15px;
    }

    input {
      flex: 1;
      min-width: 250px;
      padding: 14px 18px;
      border-radius: var(--border-radius);
      border: 2px solid var(--gray-light);
      font-size: 0.95rem;
      transition: var(--transition);
      font-family: 'Inter', sans-serif;
    }

    input:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }

    .btn {
      padding: 14px 24px;
      border-radius: var(--border-radius);
      border: 0;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-family: 'Inter', sans-serif;
    }

    .btn-primary {
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      color: white;
    }

    .btn-primary:hover {
      background: linear-gradient(90deg, var(--primary-light), var(--primary));
      box-shadow: 0 8px 20px rgba(67, 97, 238, 0.3);
    }

    .btn-secondary {
      background: var(--gray-light);
      color: var(--dark);
    }

    .btn-secondary:hover {
      background: #d1d5db;
    }

    .btn-small {
      padding: 8px 14px;
      font-size: 0.85rem;
    }

    /* Status Indicators */
    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--gray);
      font-size: 0.85rem;
      margin-top: 10px;
    }

    .spinner {
      border: 2px solid var(--gray-light);
      border-top: 2px solid var(--primary);
      border-radius: 50%;
      width: 16px;
      height: 16px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }

    @keyframes spin {
      100% {
        transform: rotate(360deg)
      }
    }

    /* Suggestions */
    .suggestions {
      margin-top: 15px;
      padding: 15px;
      background-color: #f0f7ff;
      border-radius: var(--border-radius);
      border-left: 4px solid var(--primary);
    }

    .suggestion-label {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--dark);
      font-size: 0.9rem;
    }

    .suggestion-item {
      display: inline-block;
      background: white;
      padding: 6px 12px;
      margin: 4px;
      border-radius: 30px;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.85rem;
      border: 1px solid var(--gray-light);
    }

    .suggestion-item:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    /* Word Cards Grid */
    .words-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .word-card {
      border-top: 5px solid var(--primary);
      position: relative;
      overflow: hidden;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .word-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--success));
    }

    .word-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .word-card-title {
      font-family: 'Merriweather', serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--dark);
    }

    .word-card-tag {
      background: var(--success);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .word-card-phonetic {
      color: var(--gray);
      font-style: italic;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .word-card-content {
      flex: 1;
    }

    .word-card-section {
      margin: 10px 0;
    }

    .section-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin: 12px 0 6px;
      color: var(--secondary);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .word-card-definition {
      font-size: 0.9rem;
      color: var(--dark);
      line-height: 1.5;
    }

    .word-card-urdu {
      direction: rtl;
      font-size: 1rem;
      line-height: 1.6;
      margin-top: 5px;
    }

    /* Synonyms & Antonyms in Cards */
    .synonyms-antonyms-container {
      margin-top: 10px;
    }

    .syn-ant-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0;
      font-size: 0.85rem;
    }

    .syn-ant-label {
      display: flex;
      align-items: center;
      gap: 4px;
      font-weight: 600;
      min-width: 70px;
    }

    .syn-ant-label.synonym {
      color: var(--primary);
    }

    .syn-ant-label.antonym {
      color: var(--danger);
    }

    .syn-ant-list {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      flex: 1;
    }

    .syn-ant-item {
      background: #f0f7ff;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      border: 1px solid #b3d7ff;
    }

    .syn-ant-item.synonym {
      background: #e7f4ff;
      border-color: #b3d7ff;
      color: var(--primary);
    }

    .syn-ant-item.antonym {
      background: #ffeaea;
      border-color: #ffb3b3;
      color: var(--danger);
    }

    .word-card-actions {
      display: flex;
      gap: 8px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--gray-light);
    }

    /* Modal/Dialog Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-hover);
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow: hidden;
      transform: translateY(30px);
      transition: transform 0.3s ease;
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal-header {
      padding: 20px;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-family: 'Merriweather', serif;
      font-size: 1.8rem;
      font-weight: 700;
    }

    .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: var(--transition);
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .modal-content {
      padding: 20px;
      max-height: calc(90vh - 80px);
      overflow-y: auto;
    }

    /* Tabs Navigation */
    .tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 20px;
      border-bottom: 2px solid var(--gray-light);
      padding-bottom: 5px;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 10px 18px;
      background: none;
      border: none;
      cursor: pointer;
      font-weight: 600;
      color: var(--gray);
      transition: var(--transition);
      border-radius: var(--border-radius) var(--border-radius) 0 0;
      position: relative;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .tab-btn:hover {
      color: var(--primary);
      background: rgba(67, 97, 238, 0.05);
    }

    .tab-btn.active {
      color: var(--primary);
      background: rgba(67, 97, 238, 0.1);
    }

    .tab-btn.active::after {
      content: '';
      position: absolute;
      bottom: -7px;
      left: 0;
      width: 100%;
      height: 3px;
      background: var(--primary);
      border-radius: 3px;
    }

    .tab-badge {
      background: var(--primary-light);
      color: white;
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 10px;
      min-width: 20px;
      text-align: center;
    }

    /* Tab Content */
    .tab-content {
      min-height: 300px;
    }

    .tab-pane {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .tab-pane.active {
      display: block;
    }

    /* Parts of Speech Grid */
    .pos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 12px;
      margin: 15px 0;
    }

    .pos-card {
      padding: 12px;
      border-radius: 10px;
      border: 2px solid;
      transition: var(--transition);
    }

    .pos-noun {
      background: rgba(114, 9, 183, 0.05);
      border-color: rgba(114, 9, 183, 0.2);
    }

    .pos-pronoun {
      background: rgba(241, 91, 181, 0.05);
      border-color: rgba(241, 91, 181, 0.2);
    }

    .pos-verb {
      background: rgba(0, 187, 249, 0.05);
      border-color: rgba(0, 187, 249, 0.2);
    }

    .pos-adjective {
      background: rgba(0, 245, 212, 0.05);
      border-color: rgba(0, 245, 212, 0.2);
    }

    .pos-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .pos-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
    }

    .pos-noun .pos-icon {
      background: var(--noun-color);
      color: white;
    }

    .pos-pronoun .pos-icon {
      background: var(--pronoun-color);
      color: white;
    }

    .pos-verb .pos-icon {
      background: var(--verb-color);
      color: white;
    }

    .pos-adjective .pos-icon {
      background: var(--adjective-color);
      color: white;
    }

    .pos-name {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .pos-definitions {
      font-size: 0.85rem;
      color: var(--gray);
      line-height: 1.4;
    }

    /* Definitions List */
    .definitions-list {
      margin: 15px 0;
    }

    .definition-item {
      padding: 10px;
      border-left: 3px solid var(--primary-light);
      margin-bottom: 8px;
      background: #f8f9ff;
      border-radius: 0 8px 8px 0;
    }

    .definition-text {
      margin-bottom: 5px;
    }

    .definition-example {
      font-size: 0.85rem;
      color: var(--gray);
      font-style: italic;
      padding-left: 10px;
      border-left: 2px solid var(--gray-light);
      margin-top: 5px;
    }

    /* Urdu Translation */
    .urdu-translation {
      direction: rtl;
      font-size: 1.1rem;
      margin: 15px 0;
      padding: 15px;
      background: #f9f9ff;
      border-radius: var(--border-radius);
      border-right: 4px solid var(--secondary);
      line-height: 1.8;
    }

    /* Tags Container */
    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 10px 0;
    }

    .tag {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .tag-synonym {
      background: #e7f4ff;
      color: var(--primary);
      border: 1px solid #b3d7ff;
    }

    .tag-antonym {
      background: #ffeaea;
      color: var(--danger);
      border: 1px solid #ffb3b3;
    }

    /* Quick Stats */
    .word-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 15px 0;
    }

    .meta-tag {
      padding: 4px 10px;
      background: var(--gray-light);
      border-radius: 20px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* Paragraph Translation */
    .paragraph-section {
      margin-top: 30px;
    }

    .paragraph-card {
      border-left: 5px solid var(--success);
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    /* Utility Classes */
    .hidden {
      display: none !important;
    }

    .text-center {
      text-align: center;
    }

    .mb-0 {
      margin-bottom: 0;
    }

    .mt-15 {
      margin-top: 15px;
    }

    .mt-25 {
      margin-top: 25px;
    }

    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Results Header */
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 25px 0 15px;
    }

    .results-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--dark);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 15px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .words-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
      
      .tabs {
        overflow-x: auto;
        flex-wrap: nowrap;
        padding-bottom: 10px;
      }
      
      .tab-btn {
        white-space: nowrap;
        font-size: 0.85rem;
        padding: 8px 12px;
      }
      
      .modal {
        max-height: 95vh;
      }
      
      .syn-ant-row {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .syn-ant-label {
        min-width: auto;
      }
    }

    @media (max-width: 480px) {
      .input-group {
        flex-direction: column;
      }
      
      input {
        min-width: 100%;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
      
      .words-grid {
        grid-template-columns: 1fr;
      }
      
      .word-card-title {
        font-size: 1.3rem;
      }
      
      .modal-header {
        padding: 15px;
      }
      
      .modal-title {
        font-size: 1.4rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-book-open"></i> Word Explorer</h1>
      <p class="subtitle">Analyze multiple words at once - click any card for detailed view</p>
    </header>

    <!-- Input Section -->
    <div class="card input-section">
      <form id="lookupForm">
        <div class="input-group">
          <input id="textInput" type="text" placeholder="Type a word, phrase, or paragraph..." required autofocus />
          <button class="btn btn-primary" id="submitBtn" type="submit">
            <i class="fas fa-search"></i> Analyze Words
          </button>
          <button class="btn btn-secondary" type="button" onclick="clearAll()">
            <i class="fas fa-eraser"></i> Clear
          </button>
        </div>
        
        <div class="status-indicator">
          <span id="status"></span>
        </div>
      </form>
      
      <!-- Suggestions Box -->
      <div id="suggestions" class="suggestions hidden">
        <div class="suggestion-label">Did you mean:</div>
        <div id="suggestionList"></div>
      </div>
      
      <div class="word-card-actions" style="border-top: none; margin-top: 15px; padding-top: 0;">
        <button class="btn btn-small btn-secondary" onclick="showSample()">
          <i class="fas fa-eye"></i> Show Sample
        </button>
        <button class="btn btn-small btn-secondary" onclick="showRandomWord()">
          <i class="fas fa-random"></i> Random Word
        </button>
      </div>
    </div>

    <!-- Results Section -->
    <div id="resultsSection" class="hidden">
      <div class="results-header">
        <div class="results-title">
          <i class="fas fa-layer-group"></i> Word Analysis
          <span id="wordCount" class="meta-tag">0 words</span>
        </div>
        <button class="btn btn-small btn-secondary" onclick="copyAllWords()">
          <i class="far fa-copy"></i> Copy All
        </button>
      </div>
      
      <!-- Words Grid -->
      <div class="words-grid" id="wordsGrid">
        <!-- Word cards will be inserted here -->
      </div>
    </div>

    <!-- Paragraph Translation Section -->
    <div id="paragraphSection" class="paragraph-section hidden">
      <div class="card paragraph-card">
        <div class="section-title" style="font-size: 1.1rem;">
          <i class="fas fa-paragraph"></i> Full Text Translation
        </div>
        <div id="paragraphContent" class="urdu-translation" style="font-size: 1rem;"></div>
        <div class="word-card-actions" style="border-top: none;">
          <button class="btn btn-small btn-secondary" onclick="copyParagraph()">
            <i class="far fa-copy"></i> Copy Translation
          </button>
        </div>
      </div>
    </div>

    <!-- Modal for Detailed View -->
    <div id="wordModal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <div class="modal-title" id="modalWordTitle">Word</div>
          <button class="modal-close" onclick="closeModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-content">
          <!-- Tabs Navigation -->
          <div class="tabs" id="modalTabs">
            <button class="tab-btn active" data-tab="modal-overview">
              <i class="fas fa-chart-pie"></i> Overview
              <span class="tab-badge hidden">0</span>
            </button>
            <button class="tab-btn" data-tab="modal-definitions">
              <i class="fas fa-book"></i> Definitions
              <span class="tab-badge hidden">0</span>
            </button>
            <button class="tab-btn" data-tab="modal-translation">
              <i class="fas fa-language"></i> Urdu
              <span class="tab-badge hidden">0</span>
            </button>
            <button class="tab-btn" data-tab="modal-examples">
              <i class="fas fa-comment"></i> Examples
              <span class="tab-badge hidden">0</span>
            </button>
            <button class="tab-btn" data-tab="modal-synonyms">
              <i class="fas fa-sync-alt"></i> Synonyms
              <span class="tab-badge hidden">0</span>
            </button>
          </div>

          <!-- Tab Content -->
          <div class="tab-content">
            <!-- Overview Tab -->
            <div id="modal-overview" class="tab-pane active">
              <div class="word-header">
                <div>
                  <h2 id="modalWord" class="word-title">Word</h2>
                  <p id="modalPhonetic" class="phonetic">/prəˌnʌn.siˈeɪ.ʃən/</p>
                </div>
                <div class="word-meta">
                  <span id="modalWordType" class="meta-tag"><i class="fas fa-tag"></i> Loading...</span>
                  <span id="modalWordAudio" class="meta-tag"><i class="fas fa-volume-up"></i> Audio</span>
                </div>
              </div>

              <!-- Parts of Speech Grid -->
              <div class="section-title">
                <i class="fas fa-layer-group"></i> Parts of Speech
              </div>
              <div class="pos-grid" id="modalPosGrid">
                <div class="pos-card pos-noun">
                  <div class="pos-header">
                    <div class="pos-icon"><i class="fas fa-landmark"></i></div>
                    <div class="pos-name">Noun</div>
                  </div>
                  <div class="pos-definitions">Loading...</div>
                </div>
                <div class="pos-card pos-pronoun">
                  <div class="pos-header">
                    <div class="pos-icon"><i class="fas fa-user"></i></div>
                    <div class="pos-name">Pronoun</div>
                  </div>
                  <div class="pos-definitions">Loading...</div>
                </div>
                <div class="pos-card pos-verb">
                  <div class="pos-header">
                    <div class="pos-icon"><i class="fas fa-running"></i></div>
                    <div class="pos-name">Verb</div>
                  </div>
                  <div class="pos-definitions">Loading...</div>
                </div>
                <div class="pos-card pos-adjective">
                  <div class="pos-header">
                    <div class="pos-icon"><i class="fas fa-paint-brush"></i></div>
                    <div class="pos-name">Adjective</div>
                  </div>
                  <div class="pos-definitions">Loading...</div>
                </div>
              </div>

              <!-- Quick Stats -->
              <div class="section-title">
                <i class="fas fa-chart-bar"></i> Quick Stats
              </div>
              <div class="word-meta">
                <span id="modalDefCount" class="meta-tag"><i class="fas fa-list-ol"></i> 0 Definitions</span>
                <span id="modalSynCount" class="meta-tag"><i class="fas fa-equals"></i> 0 Synonyms</span>
                <span id="modalAntCount" class="meta-tag"><i class="fas fa-not-equal"></i> 0 Antonyms</span>
                <span id="modalExCount" class="meta-tag"><i class="fas fa-comment"></i> 0 Examples</span>
              </div>
            </div>

            <!-- Definitions Tab -->
            <div id="modal-definitions" class="tab-pane">
              <div class="section-title">
                <i class="fas fa-book"></i> Detailed Definitions
              </div>
              <div id="modalDefinitionsList" class="definitions-list">
                <div class="definition-item">
                  <div class="definition-text">Enter a word to see its definitions</div>
                </div>
              </div>
            </div>

            <!-- Translation Tab -->
            <div id="modal-translation" class="tab-pane">
              <div class="section-title">
                <i class="fas fa-language"></i> Urdu Translation
              </div>
              <div id="modalUrduTranslation" class="urdu-translation">
                کسی لفظ کا ترجمہ دیکھنے کے لیے لفظ درج کریں
              </div>
              <div class="section-title mt-15">
                <i class="fas fa-globe"></i> Other Languages
              </div>
              <div id="modalOtherTranslations" class="tags-container">
                <span class="tag tag-synonym">Loading...</span>
              </div>
            </div>

            <!-- Examples Tab -->
            <div id="modal-examples" class="tab-pane">
              <div class="section-title">
                <i class="fas fa-comment"></i> Example Usage
              </div>
              <div id="modalExamplesList" class="definitions-list">
                <div class="definition-item">
                  <div class="definition-text">No examples available yet</div>
                  <div class="definition-example">Try searching for a word to see examples</div>
                </div>
              </div>
            </div>

            <!-- Synonyms Tab -->
            <div id="modal-synonyms" class="tab-pane">
              <div class="section-title">
                <i class="fas fa-sync-alt"></i> Synonyms & Antonyms
              </div>
              <div class="section-title" style="font-size: 0.9rem;">
                <i class="fas fa-equals"></i> Synonyms
              </div>
              <div id="modalSynonymsList" class="tags-container">
                <span class="tag tag-synonym">Loading...</span>
              </div>
              <div class="section-title mt-15" style="font-size: 0.9rem;">
                <i class="fas fa-not-equal"></i> Antonyms
              </div>
              <div id="modalAntonymsList" class="tags-container">
                <span class="tag tag-antonym">Loading...</span>
              </div>
            </div>
          </div>

          <!-- Modal Actions -->
          <div class="word-card-actions" style="margin-top: 25px;">
            <button class="btn btn-small btn-primary" onclick="pronounceModalWord()">
              <i class="fas fa-volume-up"></i> Pronounce
            </button>
            <button class="btn btn-small btn-secondary" onclick="copyModalDetails()">
              <i class="far fa-copy"></i> Copy Details
            </button>
            <button class="btn btn-small btn-secondary" onclick="saveModalWord()">
              <i class="far fa-bookmark"></i> Save Word
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="text-center mt-25">
      <p style="font-size: 0.85rem; color: var(--gray);">
        <i class="fas fa-magic"></i> Click any word card for detailed analysis in modal view
      </p>
    </footer>
  </div>

  <script>
    // DOM Elements
    const form = document.getElementById("lookupForm");
    const input = document.getElementById("textInput");
    const submitBtn = document.getElementById("submitBtn");
    const status = document.getElementById("status");
    const suggestions = document.getElementById("suggestions");
    const suggestionList = document.getElementById("suggestionList");
    const resultsSection = document.getElementById("resultsSection");
    const wordsGrid = document.getElementById("wordsGrid");
    const wordCount = document.getElementById("wordCount");
    const paragraphSection = document.getElementById("paragraphSection");
    const paragraphContent = document.getElementById("paragraphContent");
    const wordModal = document.getElementById("wordModal");
    
    // Modal elements
    const modalWordTitle = document.getElementById("modalWordTitle");
    const modalWord = document.getElementById("modalWord");
    const modalPhonetic = document.getElementById("modalPhonetic");
    const modalWordType = document.getElementById("modalWordType");
    
    // Stop words for filtering
    const STOP_WORDS = new Set([
      'the', 'is', 'in', 'on', 'at', 'of', 'a', 'an', 'and', 'or', 'but', 'to', 'for',
      'with', 'by', 'from', 'that', 'this', 'these', 'those', 'it', 'its', 'are', 'was',
      'were', 'be', 'have', 'has', 'had', 'as', 'not', 'you', 'i', 'we', 'they', 'their', 'them'
    ]);

    // Store word data
    let allWordData = new Map(); // word -> data
    let currentModalWord = "";

    // Tab switching for modal
    document.querySelectorAll("#modalTabs .tab-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const tabId = btn.getAttribute("data-tab");
        
        // Update active tab button
        document.querySelectorAll("#modalTabs .tab-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        
        // Show active tab content
        document.querySelectorAll("#modalTabs + .tab-content .tab-pane").forEach(pane => {
          pane.classList.remove("active");
        });
        document.getElementById(tabId).classList.add("active");
      });
    });

    // Form submission handler
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const text = input.value.trim();
      if (!text) {
        showNotification("Please enter a word or phrase", "warning");
        input.focus();
        return;
      }

      // Clear previous results
      clearResults();
      setBusy(true);

      // Extract words from input
      const words = extractWords(text);
      
      if (words.length === 0) {
        showNotification("No valid words found", "warning");
        setBusy(false);
        return;
      }

      // Show paragraph translation for multi-word input
      if (words.length > 1 || text.split(/\s+/).length > 1) {
        await translateParagraph(text);
        paragraphSection.classList.remove("hidden");
      } else {
        paragraphSection.classList.add("hidden");
      }

      // Analyze all words
      await analyzeMultipleWords(words);
      setBusy(false);
    });

    // Extract words from text
    function extractWords(text) {
      // Clean and split text into words
      const words = text.toLowerCase()
        .replace(/[^\w\s']/g, ' ')
        .split(/\s+/)
        .filter(word => word.length > 0);
      
      // For single word input, just return that word
      if (words.length === 1) {
        return words;
      }
      
      // For multiple words, filter out stop words and duplicates
      return words
        .filter(word => word.length >= 3 && !STOP_WORDS.has(word))
        .filter((word, index, self) => self.indexOf(word) === index)
        .slice(0, 12); // Limit to 12 words
    }

    // Analyze multiple words
    async function analyzeMultipleWords(words) {
      wordCount.textContent = `${words.length} word${words.length !== 1 ? 's' : ''}`;
      wordsGrid.innerHTML = "";
      
      // Show results section
      resultsSection.classList.remove("hidden");
      
      // Create word cards for each word
      for (const word of words) {
        await createWordCard(word);
      }
    }

    // Create a word card
    async function createWordCard(word) {
      try {
        // Create card element
        const card = document.createElement("div");
        card.className = "card word-card fade-in";
        card.id = `word-card-${word}`;
        
        card.innerHTML = `
          <div class="word-card-header">
            <h3 class="word-card-title">${word.charAt(0).toUpperCase() + word.slice(1)}</h3>
            <div class="word-card-tag">Analyzing...</div>
          </div>
          <div class="word-card-phonetic" id="phonetic-${word}">/.../</div>
          
          <div class="word-card-content">
            <div class="word-card-section">
              <div class="section-title">
                <i class="fas fa-book"></i> Meaning
              </div>
              <div class="word-card-definition" id="meaning-${word}">Loading definition...</div>
            </div>
            
            <div class="word-card-section">
              <div class="section-title">
                <i class="fas fa-language"></i> Urdu Translation
              </div>
              <div class="word-card-urdu" id="urdu-${word}">لوڈ ہو رہا ہے...</div>
            </div>
            
            <div class="word-card-section synonyms-antonyms-container" id="syn-ant-${word}">
              <div class="section-title">
                <i class="fas fa-sync-alt"></i> Synonyms & Antonyms
              </div>
              <div id="synonyms-${word}" class="syn-ant-row">
                <div class="syn-ant-label synonym">
                  <i class="fas fa-equals"></i> Synonyms
                </div>
                <div class="syn-ant-list" id="synonyms-list-${word}">
                  <span class="syn-ant-item synonym">Loading...</span>
                </div>
              </div>
              <div id="antonyms-${word}" class="syn-ant-row">
                <div class="syn-ant-label antonym">
                  <i class="fas fa-not-equal"></i> Antonyms
                </div>
                <div class="syn-ant-list" id="antonyms-list-${word}">
                  <span class="syn-ant-item antonym">Loading...</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="word-card-actions">
            <button class="btn btn-small btn-secondary" onclick="showWordDetails('${word}')">
              <i class="fas fa-expand"></i> View Details
            </button>
            <button class="btn btn-small btn-primary" onclick="pronounceWord('${word}')">
              <i class="fas fa-volume-up"></i> Pronounce
            </button>
          </div>
        `;
        
        wordsGrid.appendChild(card);
        
        // Fetch data for this word
        await fetchWordData(word, card);
        
      } catch (error) {
        console.error(`Error creating card for ${word}:`, error);
      }
    }

    // Fetch data for a word
    async function fetchWordData(word, card) {
      try {
        const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
        if (!response.ok) throw new Error("Word not found");
        
        const data = await response.json();
        const entry = data[0];
        
        // Store data
        allWordData.set(word, entry);
        
        // Update card with data
        updateWordCard(word, card, entry);
        
      } catch (error) {
        // Mark word as not found
        updateCardError(word, card);
      }
    }

    // Update word card with data
    async function updateWordCard(word, card, entry) {
      try {
        // Update header
        const tag = card.querySelector(".word-card-tag");
        const meanings = entry.meanings || [];
        const posList = [...new Set(meanings.map(m => m.partOfSpeech))];
        tag.textContent = posList.slice(0, 2).join(", ") || "Unknown";
        
        // Update phonetic
        const phoneticEl = card.querySelector(`#phonetic-${word}`);
        const phonetic = entry.phonetic || entry.phonetics?.[0]?.text || "/.../";
        phoneticEl.textContent = phonetic;
        
        // Update meaning
        const meaningEl = card.querySelector(`#meaning-${word}`);
        const firstDefinition = meanings[0]?.definitions?.[0]?.definition || "No definition found";
        meaningEl.textContent = firstDefinition.length > 120 
          ? firstDefinition.substring(0, 120) + "..." 
          : firstDefinition;
        
        // Update Urdu translation
        const urduEl = card.querySelector(`#urdu-${word}`);
        const translation = await translateToUrdu(word);
        urduEl.textContent = translation || "ترجمہ دستیاب نہیں";
        
        // Update synonyms and antonyms
        updateCardSynonymsAntonyms(word, card, meanings);
        
      } catch (error) {
        console.error(`Error updating card for ${word}:`, error);
        updateCardError(word, card);
      }
    }

    // Update synonyms and antonyms in card
    function updateCardSynonymsAntonyms(word, card, meanings) {
      const synonymsContainer = card.querySelector(`#synonyms-list-${word}`);
      const antonymsContainer = card.querySelector(`#antonyms-list-${word}`);
      
      synonymsContainer.innerHTML = "";
      antonymsContainer.innerHTML = "";
      
      let allSynonyms = new Set();
      let allAntonyms = new Set();
      
      meanings.forEach(meaning => {
        if (meaning.synonyms) meaning.synonyms.forEach(s => allSynonyms.add(s));
        if (meaning.antonyms) meaning.antonyms.forEach(a => allAntonyms.add(a));
        
        meaning.definitions?.forEach(def => {
          if (def.synonyms) def.synonyms.forEach(s => allSynonyms.add(s));
          if (def.antonyms) def.antonyms.forEach(a => allAntonyms.add(a));
        });
      });
      
      // Add synonyms (show up to 4)
      if (allSynonyms.size === 0) {
        synonymsContainer.innerHTML = `<span class="syn-ant-item synonym">None</span>`;
      } else {
        Array.from(allSynonyms).slice(0, 4).forEach(syn => {
          const span = document.createElement("span");
          span.className = "syn-ant-item synonym";
          span.textContent = syn;
          synonymsContainer.appendChild(span);
        });
        
        // Show count if more than 4
        if (allSynonyms.size > 4) {
          const moreSpan = document.createElement("span");
          moreSpan.className = "syn-ant-item synonym";
          moreSpan.textContent = `+${allSynonyms.size - 4} more`;
          synonymsContainer.appendChild(moreSpan);
        }
      }
      
      // Add antonyms (show up to 3)
      if (allAntonyms.size === 0) {
        antonymsContainer.innerHTML = `<span class="syn-ant-item antonym">None</span>`;
      } else {
        Array.from(allAntonyms).slice(0, 3).forEach(ant => {
          const span = document.createElement("span");
          span.className = "syn-ant-item antonym";
          span.textContent = ant;
          antonymsContainer.appendChild(span);
        });
        
        // Show count if more than 3
        if (allAntonyms.size > 3) {
          const moreSpan = document.createElement("span");
          moreSpan.className = "syn-ant-item antonym";
          moreSpan.textContent = `+${allAntonyms.size - 3} more`;
          antonymsContainer.appendChild(moreSpan);
        }
      }
    }

    // Update card with error state
    function updateCardError(word, card) {
      const tag = card.querySelector(".word-card-tag");
      const meaning = card.querySelector(`#meaning-${word}`);
      const urdu = card.querySelector(`#urdu-${word}`);
      const synonymsContainer = card.querySelector(`#synonyms-list-${word}`);
      const antonymsContainer = card.querySelector(`#antonyms-list-${word}`);
      
      tag.textContent = "Not Found";
      tag.style.background = "var(--danger)";
      meaning.textContent = "Word not found in dictionary";
      urdu.textContent = "لفظ نہیں ملا";
      synonymsContainer.innerHTML = `<span class="syn-ant-item synonym">N/A</span>`;
      antonymsContainer.innerHTML = `<span class="syn-ant-item antonym">N/A</span>`;
    }

    // Show word details in modal
    async function showWordDetails(word) {
      currentModalWord = word.toLowerCase();
      
      // Set modal title
      modalWordTitle.textContent = word.charAt(0).toUpperCase() + word.slice(1);
      modalWord.textContent = word.charAt(0).toUpperCase() + word.slice(1);
      
      // Reset modal content
      resetModalContent();
      
      // Show modal
      wordModal.classList.add("active");
      document.body.style.overflow = "hidden";
      
      // Check if we already have data
      if (allWordData.has(word)) {
        updateModalWithData(word, allWordData.get(word));
      } else {
        // Fetch data
        modalWordType.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Loading...`;
        
        try {
          const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
          if (!response.ok) throw new Error("Word not found");
          
          const data = await response.json();
          const entry = data[0];
          allWordData.set(word, entry);
          
          updateModalWithData(word, entry);
        } catch (error) {
          showModalError(word);
        }
      }
      
      // Always fetch fresh Urdu translation
      await updateModalUrduTranslation(word);
    }

    // Update modal with word data
    function updateModalWithData(word, entry) {
      // Update basic info
      const phonetic = entry.phonetic || entry.phonetics?.[0]?.text || "";
      const meanings = entry.meanings || [];
      
      modalPhonetic.textContent = phonetic || "No phonetic available";
      
      // Update word type
      const posTypes = [...new Set(meanings.map(m => m.partOfSpeech))];
      modalWordType.innerHTML = `<i class="fas fa-tag"></i> ${posTypes.join(", ")}`;
      
      // Update parts of speech grid
      updateModalPartsOfSpeech(meanings);
      
      // Update definitions
      updateModalDefinitions(meanings);
      
      // Update examples
      updateModalExamples(meanings);
      
      // Update synonyms and antonyms
      updateModalSynonymsAntonyms(meanings);
      
      // Update stats
      updateModalStats(meanings);
      
      // Update tab badges
      updateModalTabBadges(meanings);
    }

    // Update modal parts of speech grid
    function updateModalPartsOfSpeech(meanings) {
      const posMap = {};
      
      // Group meanings by part of speech
      meanings.forEach(meaning => {
        const pos = meaning.partOfSpeech;
        if (!posMap[pos]) {
          posMap[pos] = [];
        }
        posMap[pos].push(...(meaning.definitions || []));
      });
      
      // Update each POS card
      document.querySelectorAll("#modalPosGrid .pos-card").forEach(card => {
        const posName = card.querySelector(".pos-name").textContent.toLowerCase();
        const definitionsDiv = card.querySelector(".pos-definitions");
        
        if (posMap[posName] && posMap[posName].length > 0) {
          const firstDef = posMap[posName][0].definition;
          definitionsDiv.textContent = firstDef.length > 100 
            ? firstDef.substring(0, 100) + "..." 
            : firstDef;
        } else {
          definitionsDiv.textContent = "No data available";
        }
      });
    }

    // Update modal definitions
    function updateModalDefinitions(meanings) {
      const definitionsList = document.getElementById("modalDefinitionsList");
      definitionsList.innerHTML = "";
      
      if (meanings.length === 0) {
        definitionsList.innerHTML = `
          <div class="definition-item">
            <div class="definition-text">No definitions found</div>
          </div>
        `;
        return;
      }
      
      meanings.forEach(meaning => {
        const pos = meaning.partOfSpeech;
        const definitions = meaning.definitions || [];
        
        definitions.slice(0, 3).forEach((def, index) => {
          const definitionItem = document.createElement("div");
          definitionItem.className = "definition-item";
          definitionItem.innerHTML = `
            <div class="definition-text">
              <strong>${pos.charAt(0).toUpperCase() + pos.slice(1)} ${index + 1}:</strong> ${def.definition}
            </div>
            ${def.example ? `<div class="definition-example">Example: ${def.example}</div>` : ''}
          `;
          definitionsList.appendChild(definitionItem);
        });
      });
    }

    // Update modal examples
    function updateModalExamples(meanings) {
      const examplesList = document.getElementById("modalExamplesList");
      examplesList.innerHTML = "";
      
      let allExamples = [];
      meanings.forEach(meaning => {
        const definitions = meaning.definitions || [];
        definitions.forEach(def => {
          if (def.example) allExamples.push(def.example);
        });
      });
      
      if (allExamples.length === 0) {
        examplesList.innerHTML = `
          <div class="definition-item">
            <div class="definition-text">No examples found</div>
            <div class="definition-example">Try another word with more usage examples</div>
          </div>
        `;
        return;
      }
      
      allExamples.slice(0, 5).forEach(example => {
        const definitionItem = document.createElement("div");
        definitionItem.className = "definition-item";
        definitionItem.innerHTML = `
          <div class="definition-text">${example}</div>
        `;
        examplesList.appendChild(definitionItem);
      });
    }

    // Update modal synonyms and antonyms
    function updateModalSynonymsAntonyms(meanings) {
      const synonymsList = document.getElementById("modalSynonymsList");
      const antonymsList = document.getElementById("modalAntonymsList");
      
      synonymsList.innerHTML = "";
      antonymsList.innerHTML = "";
      
      let allSynonyms = new Set();
      let allAntonyms = new Set();
      
      meanings.forEach(meaning => {
        if (meaning.synonyms) meaning.synonyms.forEach(s => allSynonyms.add(s));
        if (meaning.antonyms) meaning.antonyms.forEach(a => allAntonyms.add(a));
        
        meaning.definitions?.forEach(def => {
          if (def.synonyms) def.synonyms.forEach(s => allSynonyms.add(s));
          if (def.antonyms) def.antonyms.forEach(a => allAntonyms.add(a));
        });
      });
      
      // Add synonyms
      if (allSynonyms.size === 0) {
        synonymsList.innerHTML = `<span class="tag tag-synonym">No synonyms found</span>`;
      } else {
        Array.from(allSynonyms).slice(0, 10).forEach(syn => {
          const tag = document.createElement("span");
          tag.className = "tag tag-synonym";
          tag.innerHTML = `<i class="fas fa-equals"></i> ${syn}`;
          synonymsList.appendChild(tag);
        });
      }
      
      // Add antonyms
      if (allAntonyms.size === 0) {
        antonymsList.innerHTML = `<span class="tag tag-antonym">No antonyms found</span>`;
      } else {
        Array.from(allAntonyms).slice(0, 10).forEach(ant => {
          const tag = document.createElement("span");
          tag.className = "tag tag-antonym";
          tag.innerHTML = `<i class="fas fa-not-equal"></i> ${ant}`;
          antonymsList.appendChild(tag);
        });
      }
    }

    // Update modal stats
    function updateModalStats(meanings) {
      let defCount = 0;
      let synCount = 0;
      let antCount = 0;
      let exCount = 0;
      
      meanings.forEach(meaning => {
        defCount += meaning.definitions?.length || 0;
        synCount += meaning.synonyms?.length || 0;
        antCount += meaning.antonyms?.length || 0;
        
        meaning.definitions?.forEach(def => {
          if (def.example) exCount++;
          synCount += def.synonyms?.length || 0;
          antCount += def.antonyms?.length || 0;
        });
      });
      
      // Update stats display
      document.getElementById("modalDefCount").innerHTML = `<i class="fas fa-list-ol"></i> ${defCount} Definition${defCount !== 1 ? 's' : ''}`;
      document.getElementById("modalSynCount").innerHTML = `<i class="fas fa-equals"></i> ${synCount} Synonym${synCount !== 1 ? 's' : ''}`;
      document.getElementById("modalAntCount").innerHTML = `<i class="fas fa-not-equal"></i> ${antCount} Antonym${antCount !== 1 ? 's' : ''}`;
      document.getElementById("modalExCount").innerHTML = `<i class="fas fa-comment"></i> ${exCount} Example${exCount !== 1 ? 's' : ''}`;
    }

    // Update modal tab badges
    function updateModalTabBadges(meanings) {
      let defCount = 0;
      let exCount = 0;
      let synCount = 0;
      
      meanings.forEach(meaning => {
        defCount += meaning.definitions?.length || 0;
        meaning.definitions?.forEach(def => {
          if (def.example) exCount++;
          synCount += def.synonyms?.length || 0;
        });
        synCount += meaning.synonyms?.length || 0;
      });
      
      // Update badges
      const badges = document.querySelectorAll("#modalTabs .tab-badge");
      badges[0].textContent = "4";
      badges[1].textContent = defCount > 9 ? "9+" : defCount;
      badges[2].textContent = "1";
      badges[3].textContent = exCount > 9 ? "9+" : exCount;
      badges[4].textContent = synCount > 9 ? "9+" : synCount;
      
      // Show badges
      badges.forEach(badge => badge.classList.remove("hidden"));
    }

    // Update modal Urdu translation
    async function updateModalUrduTranslation(word) {
      const urduTranslation = document.getElementById("modalUrduTranslation");
      urduTranslation.textContent = "Translating...";
      
      try {
        const translation = await translateToUrdu(word);
        urduTranslation.textContent = translation || "ترجمہ دستیاب نہیں";
      } catch (error) {
        urduTranslation.textContent = "Translation error";
      }
    }

    // Reset modal content
    function resetModalContent() {
      modalPhonetic.textContent = "/prəˌnʌn.siˈeɪ.ʃən/";
      modalWordType.innerHTML = `<i class="fas fa-tag"></i> Loading...`;
      
      // Reset POS grid
      document.querySelectorAll("#modalPosGrid .pos-definitions").forEach(el => {
        el.textContent = "Loading...";
      });
      
      // Reset other sections
      document.getElementById("modalDefinitionsList").innerHTML = `
        <div class="definition-item">
          <div class="definition-text">Loading definitions...</div>
        </div>
      `;
      
      document.getElementById("modalUrduTranslation").textContent = "Translating...";
      document.getElementById("modalExamplesList").innerHTML = `
        <div class="definition-item">
          <div class="definition-text">Loading examples...</div>
        </div>
      `;
      
      document.getElementById("modalSynonymsList").innerHTML = `<span class="tag tag-synonym">Loading...</span>`;
      document.getElementById("modalAntonymsList").innerHTML = `<span class="tag tag-antonym">Loading...</span>`;
      
      // Reset stats
      document.getElementById("modalDefCount").innerHTML = `<i class="fas fa-list-ol"></i> 0 Definitions`;
      document.getElementById("modalSynCount").innerHTML = `<i class="fas fa-equals"></i> 0 Synonyms`;
      document.getElementById("modalAntCount").innerHTML = `<i class="fas fa-not-equal"></i> 0 Antonyms`;
      document.getElementById("modalExCount").innerHTML = `<i class="fas fa-comment"></i> 0 Examples`;
      
      // Reset tab badges
      document.querySelectorAll("#modalTabs .tab-badge").forEach(badge => {
        badge.classList.add("hidden");
        badge.textContent = "0";
      });
      
      // Reset to first tab
      document.querySelectorAll("#modalTabs .tab-btn").forEach((btn, index) => {
        btn.classList.remove("active");
        if (index === 0) btn.classList.add("active");
      });
      
      document.querySelectorAll("#modalTabs + .tab-content .tab-pane").forEach((pane, index) => {
        pane.classList.remove("active");
        if (index === 0) pane.classList.add("active");
      });
    }

    // Show modal error
    function showModalError(word) {
      modalWordType.innerHTML = `<i class="fas fa-exclamation-circle"></i> Not Found`;
      modalPhonetic.textContent = "Word not found";
      
      document.getElementById("modalDefinitionsList").innerHTML = `
        <div class="definition-item">
          <div class="definition-text">The word "${word}" was not found in the dictionary.</div>
        </div>
      `;
      
      document.getElementById("modalUrduTranslation").textContent = "لفظ نہیں ملا";
    }

    // Close modal
    function closeModal() {
      wordModal.classList.remove("active");
      document.body.style.overflow = "auto";
    }

    // Translate word to Urdu
    async function translateToUrdu(text) {
      if (!text || text.length < 2) return "";
      
      try {
        const response = await fetch(
          `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=ur&dt=t&q=${encodeURIComponent(text)}`
        );
        
        if (!response.ok) {
          throw new Error(`HTTP error: ${response.status}`);
        }

        const data = await response.json();
        
        if (Array.isArray(data) && data[0] && data[0][0] && data[0][0][0]) {
          let translated = "";
          for (let i = 0; i < data[0].length; i++) {
            if (data[0][i] && data[0][i][0]) {
              translated += data[0][i][0];
            }
          }
          
          if (/[\u0600-\u06FF]/.test(translated)) {
            return translated;
          }
        }
        
        return "Translation not available";
      } catch (err) {
        console.error("Translation error:", err);
        return "Translation service unavailable";
      }
    }

    // Translate paragraph
    async function translateParagraph(text) {
      paragraphContent.textContent = "Translating paragraph...";
      
      try {
        const translation = await translateToUrdu(text);
        paragraphContent.textContent = translation || "Translation not available";
      } catch (error) {
        paragraphContent.textContent = "Translation error";
      }
    }

    // Set busy state
    function setBusy(busy) {
      submitBtn.disabled = busy;
      if (busy) {
        status.innerHTML = `<span class="spinner"></span> Analyzing words...`;
        submitBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Processing`;
      } else {
        status.innerHTML = "";
        submitBtn.innerHTML = `<i class="fas fa-search"></i> Analyze Words`;
      }
    }

    // Clear all results
    function clearResults() {
      allWordData.clear();
      currentModalWord = "";
      
      resultsSection.classList.add("hidden");
      paragraphSection.classList.add("hidden");
      wordsGrid.innerHTML = "";
      wordCount.textContent = "0 words";
      
      // Close modal if open
      closeModal();
    }

    // Clear all
    function clearAll() {
      input.value = "";
      clearResults();
      input.focus();
      suggestions.classList.add("hidden");
      showNotification("Cleared all content", "info");
    }

    // Show sample
    function showSample() {
      input.value = "The quick brown fox jumps over the lazy dog";
      form.dispatchEvent(new Event('submit'));
    }

    // Show random word
    function showRandomWord() {
      const randomWords = [
        "knowledge", "beautiful", "curiosity", "harmony", "wonder", 
        "serendipity", "eloquent", "resilient", "ephemeral", "luminous"
      ];
      const randomWord = randomWords[Math.floor(Math.random() * randomWords.length)];
      input.value = randomWord;
      form.dispatchEvent(new Event('submit'));
    }

    // Pronounce word
    function pronounceWord(word) {
      // Try to get audio URL from dictionary
      fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`)
        .then(response => response.json())
        .then(data => {
          const entry = data[0];
          if (entry?.phonetics) {
            const phonetic = entry.phonetics.find(p => p.audio) || entry.phonetics[0];
            if (phonetic?.audio) {
              const audio = new Audio(phonetic.audio);
              audio.play().catch(() => useTTS(word));
              return;
            }
          }
          useTTS(word);
        })
        .catch(() => useTTS(word));
      
      function useTTS(word) {
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'en-US';
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
      }
    }

    // Pronounce modal word
    function pronounceModalWord() {
      if (currentModalWord) {
        pronounceWord(currentModalWord);
      }
    }

    // Copy all words
    function copyAllWords() {
      const words = Array.from(allWordData.keys());
      if (words.length === 0) {
        showNotification("No words to copy", "warning");
        return;
      }
      
      const text = `Words analyzed (${words.length}):\n\n${words.map(w => `• ${w}`).join('\n')}`;
      navigator.clipboard.writeText(text)
        .then(() => showNotification("All words copied!", "success"))
        .catch(() => showNotification("Failed to copy", "danger"));
    }

    // Copy paragraph
    function copyParagraph() {
      const text = paragraphContent.textContent;
      if (!text || text === "Translating paragraph..." || text === "Translation error") {
        showNotification("No translation to copy", "warning");
        return;
      }
      
      navigator.clipboard.writeText(text)
        .then(() => showNotification("Translation copied!", "success"))
        .catch(() => showNotification("Failed to copy", "danger"));
    }

    // Copy modal details
    function copyModalDetails() {
      if (!currentModalWord || !allWordData.has(currentModalWord)) {
        showNotification("No word data to copy", "warning");
        return;
      }
      
      const entry = allWordData.get(currentModalWord);
      let text = `Word: ${currentModalWord}\n`;
      text += `Phonetic: ${entry.phonetic || 'N/A'}\n\n`;
      
      text += "Definitions:\n";
      entry.meanings.forEach(meaning => {
        text += `\n${meaning.partOfSpeech.toUpperCase()}:\n`;
        meaning.definitions.slice(0, 3).forEach((def, i) => {
          text += `  ${i + 1}. ${def.definition}\n`;
          if (def.example) text += `     Example: ${def.example}\n`;
        });
      });
      
      navigator.clipboard.writeText(text)
        .then(() => showNotification("Word details copied!", "success"))
        .catch(() => showNotification("Failed to copy", "danger"));
    }

    // Save modal word
    function saveModalWord() {
      if (!currentModalWord) {
        showNotification("No word to save", "warning");
        return;
      }
      
      let savedWords = JSON.parse(localStorage.getItem("savedWords") || "[]");
      const word = currentModalWord;
      
      if (!savedWords.includes(word)) {
        savedWords.push(word);
        localStorage.setItem("savedWords", JSON.stringify(savedWords));
        showNotification(`"${word}" saved to bookmarks`, "success");
      } else {
        showNotification(`"${word}" is already saved`, "info");
      }
    }

    // Spell checking for suggestions
    async function checkSpelling(text) {
      if (!text) {
        suggestions.classList.add("hidden");
        return;
      }

      // Get the last word
      const words = text.trim().split(/\s+/);
      const lastWord = words[words.length - 1].replace(/[^\w']/g, '');
      
      if (lastWord.length < 2) {
        suggestions.classList.add("hidden");
        return;
      }

      try {
        const resp = await fetch(`https://api.datamuse.com/sug?s=${encodeURIComponent(lastWord)}`);
        const data = await resp.json();

        if (data.length > 0) {
          suggestionList.innerHTML = "";
          data.slice(0, 5).forEach(item => {
            const span = document.createElement("span");
            span.className = "suggestion-item";
            span.textContent = item.word;
            span.onclick = () => replaceLastWord(item.word);
            suggestionList.appendChild(span);
          });
          suggestions.classList.remove("hidden");
        } else {
          suggestions.classList.add("hidden");
        }
      } catch (err) {
        suggestions.classList.add("hidden");
      }
    }

    // Replace last word with suggestion
    function replaceLastWord(word) {
      const words = input.value.trim().split(/\s+/);
      words[words.length - 1] = word;
      input.value = words.join(' ') + ' ';
      suggestions.classList.add("hidden");
      input.focus();
    }

    // Show notification
    function showNotification(message, type = "info") {
      // Create notification
      const notification = document.createElement("div");
      notification.className = "card fade-in";
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        max-width: 300px;
        background: ${type === 'success' ? '#d4edda' : type === 'danger' ? '#f8d7da' : type === 'warning' ? '#fff3cd' : '#d1ecf1'};
        border-left: 5px solid ${type === 'success' ? '#28a745' : type === 'danger' ? '#dc3545' : type === 'warning' ? '#ffc107' : '#17a2b8'};
        padding: 12px 15px;
        box-shadow: var(--box-shadow);
      `;
      
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
          <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}" 
             style="color: ${type === 'success' ? '#28a745' : type === 'danger' ? '#dc3545' : type === 'warning' ? '#ffc107' : '#17a2b8'}"></i>
          <span style="font-size: 0.9rem;">${message}</span>
        </div>
      `;

      document.body.appendChild(notification);

      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100px)';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // Initialize
    window.addEventListener("DOMContentLoaded", () => {
      input.focus();
      
      // Add input event for spell checking
      input.addEventListener("input", function() {
        checkSpelling(this.value);
      });
      
      // Close modal on ESC key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && wordModal.classList.contains("active")) {
          closeModal();
        }
        
        // Ctrl+K to focus input
        if (e.ctrlKey && e.key === "k") {
          e.preventDefault();
          input.focus();
        }
      });
      
      // Close modal when clicking outside
      wordModal.addEventListener("click", (e) => {
        if (e.target === wordModal) {
          closeModal();
        }
      });
    });
  </script>
</body>
</html>